{% schema %}
{
  "name": "Pricing Plans",
  "settings": [],
  "presets": [{ "name": "Pricing Plans" }]
}
{% endschema %}

<div x-data="{ animal: 'cat' }" class="pt-[30px]">
  <div class="mx-auto">
    <!-- Tabs -->
    <div class="relative w-full buttons-line">
      <div class="flex justify-center mx-auto md:w-fit mb-[60px]">
        {% render 'animal-tab-button',
          animal_type: 'dog',
          animal_label: 'Dog',
          underline_direction: 'underline-animate-right'
        %}
        {% render 'animal-tab-button',
          animal_type: 'cat',
          animal_label: 'Cat',
          underline_direction: 'underline-animate-left'
        %}
      </div>
    </div>

    <div class="relative">
      <!-- Ensure enough height for both swipers -->
      <!-- CAT Swiper -->
      <div
        x-show="animal === 'cat'"
        x-transition.opacity.duration.1000ms
        :class="animal !== 'cat' && '!absolute inset-0'"
        class="swiper pricingSwiper mb-8 h-fit"
        x-cloak
      >
        <div class="swiper-wrapper mx-auto !w-fit">
          {% for product in collections['cat-products'].products %}
            {% render 'animal-card', product: product %}
          {% endfor %}
        </div>
      </div>

      <!-- DOG Swiper -->
      <div
        x-show="animal === 'dog'"
        x-transition.opacity.duration.1000ms
        :class="animal !== 'dog' && '!absolute inset-0'"
        class="swiper pricingSwiper mb-8 h-fit"
        x-cloak
      >
        <div class="swiper-wrapper !w-fit mx-auto">
          {% for product in collections['dog-products'].products %}
            {% render 'animal-card', product: product %}
          {% endfor %}
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Swiper CDN -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css">
<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    new Swiper('.pricingSwiper', {
      slidesPerView: 'auto',
      spaceBetween: 24,
      breakpoints: {
        768: {
          slidesPerView: 'auto',
        },
      },
    });
  });
</script>

<style>
  .buttons-line::before {
    content: '';
    display: block;
    width: calc(100% - 60px);
    height: 2px;
    background-color: #bdc2c6;
    transition: transform 0.3s ease;
    position: absolute;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
  }
</style>
